schemas:
  Form:
    type: object
    required: [id, title, isActive, isPublic, createdAt, updatedAt]
    properties:
      id:
        type: string
      title:
        type: string
      description:
        type: string
        nullable: true
      isActive:
        type: boolean
      isPublic:
        type: boolean
      fields:
        type: array
        items:
          $ref: './form-fields.yaml#/schemas/FieldResponse'
      createdAt:
        type: string
        format: date-time
      updatedAt:
        type: string
        format: date-time

  FormsList:
    type: object
    required: [list, total, totalPages]
    properties:
      list:
        type: array
        items:
          $ref: '#/schemas/Form'
      total:
        type: integer
      totalPages:
        type: integer

  CreateFormRequest:
    type: object
    required: [title]
    properties:
      title:
        type: string
        minLength: 3
        maxLength: 255
      description:
        type: string

  UpdateFormRequest:
    type: object
    properties:
      title:
        type: string
        minLength: 3
        maxLength: 255
      description:
        type: string

  UpdateFormActiveRequest:
    type: object
    required: [isActive]
    properties:
      isActive:
        type: boolean

  UpdateFormPublicRequest:
    type: object
    required: [isPublic]
    properties:
      isPublic:
        type: boolean

GetFormList:
  tags: [Forms]
  summary: Отримати список усіх форм поточного адміністратора
  security:
    - bearerAuth: []
  parameters:
    - name: page
      in: query
      required: false
      schema:
        type: integer
        default: 1
    - name: limit
      in: query
      required: false
      schema:
        type: integer
        default: 20
    - name: sort
      in: query
      required: false
      schema:
        type: string
        enum:
          - createdAt
          - updatedAt
          - title
    - name: filter
      in: query
      required: false
      schema:
        type: string
    - name: search
      in: query
      required: false
      schema:
        type: string
  responses:
    '200':
      description: Список форм
      content:
        application/json:
          schema:
            $ref: '#/schemas/FormsList'
    '400':
      $ref: '../shared/responses.yaml#/ValidationError'
    '401':
      $ref: '../shared/responses.yaml#/UnauthorizedError'

GetForm:
  tags: [Forms]
  summary: Отримати форму по ID
  security:
    - bearerAuth: []
  parameters:
    - name: formId
      in: path
      required: true
      schema:
        type: string
  responses:
    '200':
      content:
        application/json:
          schema:
            $ref: '#/schemas/Form'
    '400':
      $ref: '../shared/responses.yaml#/ValidationError'
    '401':
      $ref: '../shared/responses.yaml#/UnauthorizedError'
    '404':
      $ref: '../shared/responses.yaml#/NotFoundError'

CreateForm:
  tags: [Forms]
  summary: Створити нову форму
  security:
    - bearerAuth: []
  requestBody:
    required: true
    content:
      application/json:
        schema:
          $ref: '#/schemas/CreateFormRequest'
  responses:
    '200':
      content:
        application/json:
          schema:
            $ref: '#/schemas/Form'
    '400':
      $ref: '../shared/responses.yaml#/ValidationError'
    '401':
      $ref: '../shared/responses.yaml#/UnauthorizedError'

UpdateForm:
  tags: [Forms]
  summary: Оновити існуючу форму
  security:
    - bearerAuth: []
  parameters:
    - name: formId
      in: path
      required: true
      schema:
        type: string
  requestBody:
    required: true
    content:
      application/json:
        schema:
          $ref: '#/schemas/UpdateFormRequest'
  responses:
    '200':
      content:
        application/json:
          schema:
            $ref: '#/schemas/Form'
    '400':
      $ref: '../shared/responses.yaml#/ValidationError'
    '401':
      $ref: '../shared/responses.yaml#/UnauthorizedError'
    '404':
      $ref: '../shared/responses.yaml#/NotFoundError'

DeleteForm:
  tags: [Forms]
  summary: Видалити існуючу форму
  security:
    - bearerAuth: []
  parameters:
    - name: formId
      in: path
      required: true
      schema:
        type: string
  responses:
    '204':
      description: Форма успішно видалена
    '400':
      $ref: '../shared/responses.yaml#/ValidationError'
    '401':
      $ref: '../shared/responses.yaml#/UnauthorizedError'
    '404':
      $ref: '../shared/responses.yaml#/NotFoundError'

UpdateFormActive:
  tags: [Forms]
  summary: Активувати форму
  security:
    - bearerAuth: []
  parameters:
    - name: formId
      in: path
      required: true
      schema:
        type: string
  responses:
    '200':
      content:
        application/json:
          schema:
            $ref: '#/schemas/Form'
    '400':
      $ref: '../shared/responses.yaml#/ValidationError'
    '401':
      $ref: '../shared/responses.yaml#/UnauthorizedError'
    '404':
      $ref: '../shared/responses.yaml#/NotFoundError'

UpdateFormPublic:
  tags: [Forms]
  summary: Опублікувати форму
  security:
    - bearerAuth: []
  parameters:
    - name: formId
      in: path
      required: true
      schema:
        type: string
  responses:
    '200':
      content:
        application/json:
          schema:
            $ref: '#/schemas/Form'
    '400':
      $ref: '../shared/responses.yaml#/ValidationError'
    '401':
      $ref: '../shared/responses.yaml#/UnauthorizedError'
    '404':
      $ref: '../shared/responses.yaml#/NotFoundError'
